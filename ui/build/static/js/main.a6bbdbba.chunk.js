(this.webpackJsonptateti2=this.webpackJsonptateti2||[]).push([[0],[,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},function(e,t,n){"use strict";var a=n(1),r=n.n(a),s=n(2),o=n(4),i=n(5),u=n(3),l=n(7),c=n(6),h=n(0),d=n.n(h);n(21),n(22);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i={};return i.method=e,i.url=t,i.bodyArgs=n,i.getArgs=a,i.headers=o,i.response={status:0,json:null,string:null},i.onload=null,i.send=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){JSON.stringify(i.bodyArgs);var t=new XMLHttpRequest;t.onloadend=function(){i.response.status=this.status,i.response.string=this.responseText;try{i.response.json=JSON.parse(this.responseText)}catch(t){i.response.json=null}"function"==typeof i.onload&&setTimeout((function(){i.onload(i)}),50),e(i.response)};var n=new URLSearchParams(i.getArgs).toString();if(n&&(n="?"+n),t.open(i.method,i.url+n,!0),i.headers)for(var a in i.headers)t.setRequestHeader(a,i.headers[a]);t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(i.bodyArgs))})));case 1:case"end":return e.stop()}}),e)}))),i}function v(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function m(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}var f="http://"+window.location.hostname+":3001",b=p();b.method="post",b.headers.Authorization="";var g=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={value:""},a.parent=e.parent,a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.url=f+"/login",b.method="post",b.bodyArgs={name:this.state.value},e.next=5,b.send();case 5:200==(n=e.sent).status&&n.json?(b.headers.Authorization=n.json.token,this.parent.setState({logeado:!0,user:n.json.name}),v("token",n.json.token,1)):400==n.status&&alert("El nombre solo debe tener caracteres alfabeticos,con un min 5 y un max de 10");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.parent.state.logeado?null:d.a.createElement("div",null,d.a.createElement("label",null,"Name:",d.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange})),d.a.createElement("button",{onClick:this.handleSubmit},"Enviar"))}}]),n}(d.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={value:""},a.parent=e.parent,a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.url=f+"/play",b.method="post",b.bodyArgs.name=this.state.value,this.parent.setState({cruces:"",circulos:"",estado:""}),e.next=6,b.send();case 6:200==(n=e.sent).status&&n.json?(this.parent.partida=n.json.id,this.parent.setState({joined:!0})):401==n.status&&this.parent.setState({logeado:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.parent.state.logeado?d.a.createElement("div",null,d.a.createElement("label",null,d.a.createElement("input",{placeholder:"mate",type:"text",value:this.state.value,onChange:this.handleChange})),d.a.createElement("button",{onClick:this.handleSubmit},"Enviar")):null}}]),n}(d.a.Component),j=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).parent=e.parent,a.move=a.move.bind(Object(u.a)(a)),a.state={youAre:"",yourRivalName:"",yourRival:"",board:"---------",estado:""},a.turno=0,a.darpresente=!0,a.parent.hilo&&clearInterval(a.parent.hilo),a.parent.hilo=setInterval((function(){a.presente()}),1e3),a}return Object(i.a)(n,[{key:"updateState",value:function(e){var t=e.winner?d.a.createElement("div",null,"Gano ",e.winner):"";!t&&9<=e.turn&&(t=d.a.createElement("div",null,"Empate")),this.turno=e.turn;var n="X";e.players.circle==e.players.cross?n="X y O":e.players.circle==this.parent.state.user&&(n="O"),this.setState({youAre:n,board:e.board,yourRival:e.players.circle==this.parent.state.user?"X":"O",yourRivalName:e.players.circle==this.parent.state.user?e.players.cross:e.players.circle,estado:t})}},{key:"presente",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.parent.state.joined){e.next=2;break}return e.abrupt("return");case 2:if(!1!==this.darpresente){e.next=5;break}return this.darpresente=!0,e.abrupt("return");case 5:return(n=p()).headers=b.headers,n.method="put",n.bodyArgs={game:this.parent.partida},n.url=f+"/present",e.next=12,n.send();case 12:200==(a=e.sent).status&&a.json&&this.updateState(a.json);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1*t.target.getAttribute("pos"),a=n%3,n=parseInt(n/3),this.darpresente=!1,b.method="put",b.url=f+"/move",b.bodyArgs={game:this.parent.partida,x:a,y:n},e.next=9,b.send();case 9:s=e.sent,o=this.turno,200==s.status&&s.json?(this.darpresente=!1,this.updateState(s.json),o==this.turno&&""==s.json.winner&&this.turno<9&&this.state.yourRivalName&&(s.json.players.circle==s.json.players.cross||o%2==0&&"X"==this.state.youAre||o%2==1&&"O"==this.state.youAre?this.setState({estado:d.a.createElement("div",null,"Esa casilla esta ocupada")}):this.setState({estado:d.a.createElement("div",null,"No es tu turno")}))):s.status;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.parent.state.logeado||!this.parent.state.joined)return null;for(var e=[],t={width:100,height:100},n=0;n<9;n++)n%3===0&&e.push(d.a.createElement("br",null)),e.push(d.a.createElement("button",{style:t,pos:n,onClick:this.move},this.state.board[n]));return d.a.createElement("div",null,"Eres:",this.state.youAre,d.a.createElement("br",null),"Juegas contra:",this.state.yourRivalName,d.a.createElement("br",null),this.state.estado,e)}}]),n}(d.a.Component),O=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={logeado:!1,user:"",joined:!1},a.getUser(),a}return Object(i.a)(n,[{key:"getUser",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.headers.Authorization=m("token"),b.method="get",b.url=f+"/user",e.next=5,b.send();case 5:200==(t=e.sent).status&&t.json?this.setState({user:t.json.name,logeado:!0}):t.status;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement("div",{className:"App"},d.a.createElement("header",{className:"App-header"},d.a.createElement("h2",null,this.state.user),d.a.createElement(g,{parent:this}),d.a.createElement(y,{parent:this}),d.a.createElement(j,{parent:this})))}}]),n}(d.a.Component);t.a=O},function(e,t,n){e.exports=n(13)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),a=n.n(t),r=n(9),s=n.n(r),o=(n(19),n(11)),i=n(10);e.partidas={},s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,null)),document.getElementById("root")),i.a()}.call(this,n(14))},,,,,,function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){}],[[12,1,2]]]);
//# sourceMappingURL=main.a6bbdbba.chunk.js.map